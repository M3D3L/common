import{r as v,k as L,f as R,v as D,o as p,c as g,a as i,t as x,p as B,q as $,Q as E,R as j,m as z,w as N,d as O,n as P,H,u as C,S as W,l as F,e as Q,b as T,T as G}from"./BN0B7Lbi.js";import{_ as J}from"./ChIqi9il.js";import{_ as K}from"./D6IUs7d_.js";const X={id:"top",class:"w-full scroll-mt-40"},Y={class:"flex flex-row items-center w-full gap-6 mb-6 align-center"},Z={class:"w-full text-5xl text-center lg:text-7xl font-heading text-primary drop-shadow-md sm:text-left"},ee={key:0},ae={__name:"Navigator",props:{sections:{type:Array,required:!0},activeClass:{type:String,default:"bg-primary text-primary-foreground"},initialActiveId:{type:String,default:null},centerOnMobile:{type:Boolean,default:!0},title:{type:String,default:""},description:{type:String,default:""}},emits:["sectionChange","pillClick"],setup(u,{expose:b,emit:n}){var _,S;const f=u,d=n,w=v(null),m=v(null),c=v(f.initialActiveId??((S=(_=f.sections)==null?void 0:_[0])==null?void 0:S.id)??null),r=v([]);let l=null,a=!1;const y=((t,e=80)=>{let s=null;return(...o)=>{clearTimeout(s),s=setTimeout(()=>t(...o),e)}})(t=>{var s;const e=(s=w.value)==null?void 0:s.querySelector(`#${t}`);e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},80),U=(t,e)=>{var k;d("pillClick",t),e!=null&&e.preventDefault&&e.preventDefault(),c.value=t,a=!0;const s=document.getElementById(t),o=`pill-${t}`;if(((k=w.value)==null?void 0:k.querySelector(`#${o}`))&&y(o),s){s.scrollIntoView({behavior:"smooth",block:"start"});const M=Math.abs(s.getBoundingClientRect().top),A=Math.min(900,200+Math.round(M*.6));setTimeout(()=>{a=!1},A+120)}else setTimeout(()=>{a=!1},300);try{history.replaceState(null,"",`#${t}`)}catch{}},I=t=>{t&&(r.value.includes(t)||r.value.push(t),l&&t instanceof HTMLElement&&l.observe(t))},V=t=>{a||t.forEach(e=>{e.isIntersecting&&c.value!==e.target.id&&(c.value=e.target.id,d("sectionChange",e.target.id),f.centerOnMobile&&window.innerWidth<768&&y(`pill-${c.value}`))})};return L(()=>{l=new IntersectionObserver(V,{rootMargin:"-40% 0px -55% 0px",threshold:0}),(m.value?Array.from(m.value.querySelectorAll("section[id]")):[]).forEach(e=>I(e));try{const e=window.location&&window.location.hash||"";if(e){const s=e.replace("#","");f.sections.some(o=>o.id===s)&&(c.value=s,setTimeout(()=>y(`pill-${s}`),120))}}catch(e){console.warn("Error reading URL hash:",e)}}),R(c,t=>{try{history.replaceState(null,"",`#${t}`)}catch(e){console.warn("Error updating URL hash:",e)}}),D(()=>{l==null||l.disconnect()}),b({setSectionRef:I}),(t,e)=>{var s;return p(),g("div",X,[i("div",Y,[i("h1",Z,x(u.title),1),B(t.$slots,"button")]),u.description?(p(),g("p",ee,x(u.description),1)):$("",!0),(s=u.sections)!=null&&s.length?(p(),g("nav",{key:1,id:"top","aria-label":"Page Navigation",ref_key:"navbar",ref:w,class:"sticky z-20 flex gap-2 py-3 mb-6 overflow-x-auto border-b shadow-sm top-16 bg-background/80 backdrop-blur-md"},[(p(!0),g(E,null,j(u.sections,(o,q)=>(p(),g(E,{key:`pill-${o.id}`},[o!=null&&o.id&&(o!=null&&o.title)?(p(),z(C(W),{key:0,as:"a",id:`pill-${o.id}`,href:`#${o.id}`,size:"sm",variant:"outline",class:P(["flex-shrink-0 transition-colors duration-200",c.value===o.id?u.activeClass:""]),onClick:H(k=>U(o.id,k),["prevent"]),"aria-current":c.value===o.id?"true":"false"},{default:N(()=>[O(x(o.title),1)]),_:2},1032,["id","href","class","onClick","aria-current"])):$("",!0)],64))),128))],512)):$("",!0),i("div",{ref_key:"slotContainer",ref:m},[B(t.$slots,"default")],512)])}}},te={class:"w-full h-full"},le=["src"],re=F({__name:"ModalCarousel",props:{slides:{},collectionId:{},propertyId:{}},setup(u){const b=G(),n=u,f=v(null),d=v(""),w=r=>{var l;d.value=n.slides[r],(l=f.value)==null||l.toggleModal()},m=r=>{const l=n.slides.findIndex(h=>h===d.value);let a=r==="back"?l-1:l+1;a<0&&(a=n.slides.length-1),a>=n.slides.length&&(a=0),d.value=n.slides[a]||""},c=Q(()=>`${b.public.pocketbaseUrl}api/files/${n.collectionId}/${n.propertyId}/${d.value}?token=`);return R(()=>n.slides,r=>{r.length>0&&(d.value=r[0]||"")}),(r,l)=>{const a=J;return p(),g("div",null,[T(a,{slides:r.slides.map(h=>`${C(b).public.pocketbaseUrl}api/files/${n.collectionId}/${n.propertyId}/${h}?token=`),onSelectedEvent:w},null,8,["slides"]),T(K,{ref_key:"modal",ref:f,class:"w-full"},{default:N(()=>[i("button",{onClick:l[0]||(l[0]=h=>m("back")),class:"absolute top-0 bottom-0 left-0 w-10 text-gray-500 transition-all hover:bg-black/5 hover:text-gray-700"},l[2]||(l[2]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),i("div",te,[i("img",{src:C(c),class:"object-cover w-full h-full",alt:"Selected property image"},null,8,le)]),i("button",{onClick:l[1]||(l[1]=h=>m("forward")),class:"absolute top-0 bottom-0 right-0 w-10 text-gray-500 transition-all hover:bg-black/5 hover:text-gray-700"},l[3]||(l[3]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mx-auto transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))]),_:1},512)])}}});export{ae as _,re as a};
