import{u as pe}from"./Ju0TuKTv.js";import{e as r,o as i,c as d,l as ge,U as he,r as I,k as _e,b as h,u as e,a as n,t as l,m as z,w as p,q as g,Q as oe,d as $,R as ve,_ as be}from"./BN0B7Lbi.js";import{L as xe,_ as we}from"./HJW3Qd6o.js";import{_ as ye}from"./ChIqi9il.js";import{_ as ke}from"./D_wO4cs_.js";import{_ as Se,a as Ce}from"./CZPtSbON.js";import{_ as E}from"./-fhrnqg4.js";import{_ as je}from"./sGX1aMxe.js";import{_ as $e}from"./Bo3vZDjX.js";import{_ as Le}from"./CjzsQgrk.js";import{u as Be,a as Ie}from"./D-Ko8XmK.js";import{u as Ee}from"./Ag6tYbTR.js";import{c as Me}from"./Bd64R_8f.js";import{c as Q}from"./DJUxloUB.js";import"./CZLR9lnD.js";import"./1seZaK8e.js";import"./D6IUs7d_.js";import"./2cAMmKoA.js";import"./4NRGWUlF.js";import"./CYK5oy4V.js";/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Q("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=Q("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=Q("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),De={class:"hidden"},Pe={__name:"SeoMeta",props:{seoData:{type:Object,required:!0}},setup(A){const x=A;return pe(r(()=>{var w;return{title:((w=x.seoData)==null?void 0:w.title)||"San Carlos Insider",...x.seoData}})),(w,o)=>(i(),d("div",De))}};function Re(){const{fetchCollection:A,fetchRecord:x,uploadFile:w}=Be(),o=Ee(),{getCacheKey:y,get:v,set:a,del:K,clearAll:O}=Ie({ttl:60*60*1e3,namespace:"businesses"});function D(u){return u.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}async function P(u={}){const f={page:1,perPage:10,filter:"",sort:"-created",expand:"category"},{page:m,perPage:k,filter:_,sort:T,expand:V}={...f,...u};let F=_;const U=y("fetchBusinesses",{page:m,perPage:k,filter:F,sort:T,expand:V}),N=v(U);if(N)return N;const W=await A("businesses",m,k,F,T,V);return a(U,W),W}async function L(u,f=!0){const m=y("fetchBusinessBySlug",{slug:u}),k=v(m);if(k&&f)return k;try{const _=await o.collection("businesses").getFirstListItem(`slug = "${u}"`,{expand:"category"});return a(m,_),_}catch(_){throw console.error("Error fetching business:",_),_}}async function R(u){if(!o.authStore.model)throw new Error("Authentication required");try{const f=await o.collection("businesses").create({...u,slug:D(u.name_en)});return O(),u.cover_image?await w(u.cover_image,"businesses",f.id,"cover_image"):f}catch(f){throw console.error("Error creating business:",f),f}}async function b(){const u=y("fetchAllCategories"),f=v(u);if(f)return f;try{const m=await o.collection("categories").getFullList({sort:"name_en"});return a(u,m),m}catch(m){throw console.error("Error fetching categories:",m),m}}return{fetchBusinesses:P,fetchBusinessBySlug:L,createBusiness:R,fetchAllCategories:b,generateSlug:D}}const Te={class:"relative w-full p-6 mx-auto lg:max-w-6xl font-body bg-background text-foreground md:p-10"},Ve={key:0,class:"flex flex-col items-center justify-center min-h-[50vh] text-center"},Fe={class:"text-lg font-semibold"},Ue={key:1,class:"flex flex-col items-center justify-center min-h-[50vh] text-center text-red-500"},Ne={class:"text-2xl font-bold"},We={class:"mt-2"},Ge={id:"intro",class:"pb-12 scroll-mt-72"},qe={class:"relative w-full mb-6 overflow-hidden h-96"},Ke=["alt"],Oe={id:"contact",class:"pt-6 pb-12 scroll-mt-40",ref:"setSectionRef"},He={class:"mb-8 text-3xl font-bold sm:text-4xl font-heading text-primary"},Qe={class:"flex flex-col gap-6 lg:flex-row"},Je={class:"text-base leading-relaxed"},Xe={class:"text-sm text-muted-foreground"},Ye={key:0,class:"mt-4 text-base font-semibold leading-relaxed"},Ze={key:1},et={key:0},tt=["href"],st=["href"],ot={key:1},nt=["href"],at={key:2},rt=["href"],lt=["src"],it={key:0,class:"flex items-center justify-center w-full h-40 bg-gray-200 rounded-lg"},ct={key:1,id:"services",class:"py-12 scroll-mt-40",ref:"setSectionRef"},ut={class:"mb-8 text-3xl font-bold sm:text-4xl font-heading text-primary"},dt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ft=["src","alt"],mt={class:"flex flex-col flex-grow"},pt={key:2,id:"gallery",class:"py-12 scroll-mt-40",ref:"setSectionRef"},gt={class:"mb-8 text-3xl font-bold sm:text-4xl font-heading text-primary"},ht={class:"w-full min-h-[80vh] lg:aspect-video flex items-center justify-center"},_t=["src","alt"],vt={id:"menu",class:"pt-6 pb-12 scroll-mt-40",ref:"setSectionRef"},bt={class:"z-10 flex flex-col items-center gap-2 md:items-start"},xt={class:"text-2xl font-bold text-background drop-shadow-sm"},wt={class:"max-w-md text-background/90"},yt=15,kt=ge({__name:"index",setup(A){const x=he(),{fetchBusinessBySlug:w}=Re(),o=I(null),y=I(!0),v=I(null),a=I(!1);r(()=>x.params.slug);const K=r(()=>{var t,s;return a.value?(t=o.value)==null?void 0:t.description_Sp:(s=o.value)==null?void 0:s.description_En}),O=r(()=>a.value?"¡Ven a visitarnos!":"Come visit us!"),D=r(()=>{var t,s;return((s=(t=o.value)==null?void 0:t.cover_image)==null?void 0:s.url)||null}),P=r(()=>{var t,s;return((s=(t=o.value)==null?void 0:t.services)==null?void 0:s.map(c=>{var S,C,j;return{image:((S=c.image)==null?void 0:S.url)||H("Service"),title:a.value?c.title_es:c.title_en,description:a.value?c.description_es:c.description_en,alt:a.value?(C=c.image)==null?void 0:C.alt_es:(j=c.image)==null?void 0:j.alt_en}}))||[]}),L=r(()=>{var t,s;return((s=(t=o.value)==null?void 0:t.gallery)==null?void 0:s.map(c=>({url:c.url||H("Image"),alt:a.value?c.alt_es:c.alt_en})))||[]}),R=r(()=>{var s;const t={facebook:ne,instagram:ze,twitter:Ae,linkedin:xe};return(((s=o.value)==null?void 0:s.socials)||[]).map(c=>({icon:t[c.platform.toLowerCase()]||ne,href:c.url}))}),b=r(()=>{var t;return((t=o.value)==null?void 0:t.is_featured)||!1}),u=r(()=>{var s;const t=(s=o.value)==null?void 0:s.location;return t!=null&&t.lat&&(t!=null&&t.lng)?`https://maps.google.com/maps?q=${t.lat},${t.lng}&z=${yt}&t=k&output=embed`:""}),f=r(()=>{const t=[];return t.push({id:"intro",title:a.value?"Introducción":"Introduction"},{id:"contact",title:a.value?"Contacto":"Contact"}),b.value&&t.push({id:"services",title:a.value?"Servicios":"Services"},{id:"gallery",title:a.value?"Galería":"Gallery"},{id:"menu",title:a.value?"Menú":"Menu"}),t}),m=r(()=>a.value?"Cargando...":"Loading..."),k=r(()=>a.value?"Cargando datos del negocio...":"Loading business data..."),_=r(()=>a.value?"Error al cargar el negocio":"Error loading business"),T=r(()=>a.value?"No se pudo cargar la información del negocio.":"Could not load business information."),V=r(()=>a.value?"Servicios de Reubicación para Cada Estilo de Vida":"Relocation Services for Every Lifestyle"),F=r(()=>a.value?"Dirección:":"Address:"),U=r(()=>a.value?"Teléfono:":"Phone:"),N=r(()=>a.value?"Correo:":"Email:"),W=r(()=>a.value?"Sitio Web:":"Website:"),ae=r(()=>a.value?"Ubicación no disponible":"Location not available"),re=r(()=>a.value?"Servicios":"Services"),le=r(()=>a.value?"Galería":"Gallery");function H(t){return`https://placehold.co/400x300/F0F0F0/000000?text=${encodeURIComponent(t)}`}function ie(t,s){t.target.src=H(s)}function ce(t){return[t.street,t.city,t.state,t.zip,t.country].filter(Boolean).join(", ")}const ue=t=>t.replace(/\D/g,""),J=I(null),M=I(0),X=r(()=>L.value[M.value]||{});function Y(t){var s;M.value=t,(s=J.value)==null||s.open()}function Z(t){const s=L.value.length;s&&(M.value=t==="next"?(M.value+1)%s:(M.value-1+s)%s)}const de=r(()=>{var t,s,c,S,C,j,G;return Me({title:((t=o.value)==null?void 0:t.name)||"",summary:K.value||"",imageUri:D.value||"",pubDate:((s=o.value)==null?void 0:s.created_at)||"",byline:((c=o.value)==null?void 0:c.owner)||"",siteName:"San Carlos Insider",twitterSite:((j=(C=(S=o.value)==null?void 0:S.socials)==null?void 0:C.find(q=>q.platform==="twitter"))==null?void 0:j.url)||"",tags:((G=o.value)==null?void 0:G.tags)||[]})});return _e(async()=>{const t=x.params.slug;if(!t){v.value=new Error(a.value?"Falta el slug del negocio en la URL.":"Business slug missing in URL."),y.value=!1;return}try{o.value=await w(t)}catch(s){v.value=s}finally{y.value=!1}}),(t,s)=>{var q;const c=Pe,S=we,C=ye,j=ke,G=Se;return i(),d(oe,null,[h(c,{seoData:e(de)},null,8,["seoData"]),n("div",Te,[e(y)?(i(),d("div",Ve,[n("p",Fe,l(e(k)),1),s[3]||(s[3]=n("div",{class:"w-12 h-12 mt-4 border-b-2 rounded-full animate-spin border-primary"},null,-1))])):e(v)?(i(),d("div",Ue,[n("h2",Ne,l(e(_)),1),n("p",We,l(e(v).message||e(T)),1)])):e(o)?(i(),z(G,{key:2,title:((q=e(o))==null?void 0:q.name)||e(m),sections:e(f),ref:"navRef"},{button:p(()=>[e(b)&&e(R).length?(i(),z(S,{key:0,socialLinks:e(R),columnOnMobile:!0},null,8,["socialLinks"])):g("",!0)]),default:p(()=>{var ee,te,se;return[n("section",Ge,[n("div",qe,[e(b)?(i(),z(C,{key:1,slides:["https://d1csarkz8obe9u.cloudfront.net/posterpreviews/restaurant-website-banner-design-template-9af8d62d2505f04d08f144bc0f2b1bf4_screen.jpg?ts=1652771082","https://d1csarkz8obe9u.cloudfront.net/posterpreviews/restaurant-website-banner-design-template-9af8d62d2505f04d08f144bc0f2b1bf4_screen.jpg?ts=1652771082","https://d1csarkz8obe9u.cloudfront.net/posterpreviews/restaurant-website-banner-design-template-9af8d62d2505f04d08f144bc0f2b1bf4_screen.jpg?ts=1652771082","https://d1csarkz8obe9u.cloudfront.net/posterpreviews/restaurant-website-banner-design-template-9af8d62d2505f04d08f144bc0f2b1bf4_screen.jpg?ts=1652771082"],onSelectedEvent:Y,breakpoints:{640:{slidesPerView:1.1},768:{slidesPerView:1.1},1024:{slidesPerView:1.1}}})):(i(),d("img",{key:0,src:"https://d1csarkz8obe9u.cloudfront.net/posterpreviews/restaurant-website-banner-design-template-9af8d62d2505f04d08f144bc0f2b1bf4_screen.jpg?ts=1652771082",alt:`${(ee=e(o))==null?void 0:ee.name} banner`,class:"object-cover w-full h-full bg-center rounded-lg shadow-md"},null,8,Ke))])]),n("section",Oe,[n("h2",He,l(e(V)),1),n("div",Qe,[h(e(E),{class:"p-6 space-y-4 lg:w-1/2"},{default:p(()=>[n("p",Je,l(e(K)),1),n("p",Xe,l(e(O)),1),e(o).address?(i(),d("p",Ye,l(e(F))+" "+l(ce(e(o).address)),1)):g("",!0),e(o).contact?(i(),d("div",Ze,[e(o).contact.phone?(i(),d("p",et,[$(l(e(U))+" ",1),n("a",{id:"phone",href:`tel:${e(o).contact.phone}`,class:"text-blue-600 hover:underline"},l(e(o).contact.phone),9,tt),e(o).contact.phone?(i(),d("a",{key:0,href:`https://wa.me/${ue(e(o).contact.phone)}`,target:"_blank",rel:"noopener noreferrer",class:"ml-4 text-green-600 hover:underline","aria-label":"Chat on WhatsApp"}," WhatsApp ",8,st)):g("",!0)])):g("",!0),e(o).contact.email?(i(),d("p",ot,[$(l(e(N))+" ",1),n("a",{href:`mailto:${e(o).contact.email}`,class:"text-blue-600 hover:underline"},l(e(o).contact.email),9,nt)])):g("",!0),e(o).contact.website?(i(),d("p",at,[$(l(e(W))+" ",1),n("a",{href:e(o).contact.website,target:"_blank",class:"text-blue-600 hover:underline"},l(e(o).contact.website),9,rt)])):g("",!0)])):g("",!0)]),_:1}),e(u)?(i(),z(e(E),{key:0,class:"relative w-full min-h-[400px] lg:w-1/2 overflow-hidden"},{default:p(()=>[n("iframe",{class:"absolute inset-0 w-full h-full",src:e(u),style:{border:"0"},allowfullscreen:"",loading:"lazy"},null,8,lt)]),_:1})):(i(),z(e(E),{key:1,class:"relative flex items-center justify-center w-full min-h-[400px] lg:w-1/2 bg-gray-100 text-gray-500"},{default:p(()=>[$(l(e(ae)),1)]),_:1}))])],512),e(b)?g("",!0):(i(),d("div",it,s[4]||(s[4]=[n("span",{class:"text-gray-600"},"[Advertisement]",-1)]))),e(b)&&e(P).length?(i(),d("section",ct,[n("h2",ut,l(e(re)),1),n("ul",dt,[(i(!0),d(oe,null,ve(e(P),(B,fe)=>(i(),d("li",{key:fe},[h(e(E),{class:"flex flex-col h-full gap-4 p-6 sm:flex-row sm:items-start"},{default:p(()=>[n("img",{src:B.image,alt:B.alt,class:"object-cover w-full h-40 rounded-lg shadow-sm sm:w-32 sm:h-32",onError:s[0]||(s[0]=me=>ie(me,"Service"))},null,40,ft),n("div",mt,[h(e($e),{class:"text-lg font-bold sm:text-xl"},{default:p(()=>[$(l(B.title),1)]),_:2},1024),h(e(je),{class:"text-sm leading-relaxed"},{default:p(()=>[$(l(B.description),1)]),_:2},1024)])]),_:2},1024)]))),128))])],512)):g("",!0),e(b)&&e(L).length?(i(),d("section",pt,[n("h2",gt,l(e(le)),1),h(Ce,{slides:e(L),"collection-id":(te=e(o))==null?void 0:te.collectionId,propertyId:(se=e(o))==null?void 0:se.id,onSelectedEvent:Y},null,8,["slides","collection-id","propertyId"]),h(Le,{ref_key:"modal",ref:J},{default:p(()=>[h(e(E),{class:"relative flex flex-row items-center justify-between p-4 bg-background"},{default:p(()=>[n("button",{onClick:s[1]||(s[1]=B=>Z("back")),class:"left-0 gallery-nav-btn"},s[5]||(s[5]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),n("div",ht,[n("img",{src:e(X).url,alt:e(X).alt,class:"object-contain max-w-full max-h-[80vh] rounded-lg shadow-lg"},null,8,_t)]),n("button",{onClick:s[2]||(s[2]=B=>Z("next")),class:"right-0 gallery-nav-btn"},s[6]||(s[6]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 mx-auto transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))]),_:1})]),_:1},512)],512)):g("",!0),n("section",vt,[h(e(E),{class:"relative flex flex-col items-center justify-center gap-4 p-8 overflow-hidden text-center shadow-lg bg-gradient-to-r from-primary/90 to-primary-foreground/90 rounded-2xl md:flex-row md:text-left"},{default:p(()=>[n("div",bt,[n("h2",xt,l(e(a).value?"¡Descubre nuestro menú!":"Discover Our Menu!"),1),n("p",wt,l(e(a).value?"Explora deliciosos platillos preparados con ingredientes frescos.":"Explore delicious dishes made with fresh ingredients."),1),h(j,{to:`${e(x).path}/menu`,class:"px-5 py-2 mt-2 font-semibold transition-colors rounded-lg shadow text-primary bg-background hover:bg-background/90"},{default:p(()=>[$(l(e(a).value?"Ver Menú":"View Menu"),1)]),_:1},8,["to"])]),s[7]||(s[7]=n("div",{class:"absolute inset-0 overflow-hidden opacity-20 md:static md:opacity-100 md:flex md:items-center"},[n("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTxPPCzE7IDzDog-ufAkkokAWsxA0_DHk_KGw&s",alt:"Menu preview",class:"object-cover w-full h-full rounded-lg shadow-md md:w-48 md:h-48"})],-1))]),_:1})],512)]}),_:1},8,["title","sections"])):g("",!0)])],64)}}}),Gt=be(kt,[["__scopeId","data-v-46bc5f3a"]]);export{Gt as default};
